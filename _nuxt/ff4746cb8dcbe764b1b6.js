/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{278:function(t,e,o){var content=o(595);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(8).default)("0276aec2",content,!0,{sourceMap:!1})},594:function(t,e,o){"use strict";var r=o(278);o.n(r).a},595:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,".color .img-colors,.color .nya-input,.color .preview,.color .vc-slider,.color .vue-slider{margin-bottom:.9375rem}.color .nya-input,.color .vc-slider{width:100%}.color .img-colors .img-color div:not(.nya-subtitle){padding:.625rem;display:inline-block;color:#fff;text-shadow:2px 2px 2px rgba(0,0,0,.2);text-shadow:.125rem .125rem .125rem rgba(0,0,0,.2)}.color .img-colors .img-palette{margin-top:.9375rem}.color .img-colors .img-palette ul{padding:0;margin:0}.color .img-colors .img-palette li{margin:0;display:inline-block;font-size:16px;font-size:1rem;box-sizing:border-box;padding:.625rem;text-align:center;color:#fff;text-shadow:2px 2px 2px rgba(0,0,0,.2);text-shadow:.125rem .125rem .125rem rgba(0,0,0,.2)}@media (max-width:850px){.color .img-colors .img-palette li{width:30%}}.color .preview{font-size:0}.color .preview img{width:300px;width:18.75rem;max-width:100%}",""])},764:function(t,e,o){"use strict";o.r(e);o(31);var r=o(4),n=(o(65),o(66),o(277)),c=o(588),l=o.n(c),h=(o(16),o(589),function(image){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=image.width,this.height=this.canvas.height=image.height,this.context.drawImage(image,0,0,this.width,this.height)});h.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},h.prototype.update=function(t){this.context.putImageData(t,0,0)},h.prototype.getPixelCount=function(){return this.width*this.height},h.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},h.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var f=function(){};if(f.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},f.prototype.getPalette=function(t,e,o){(void 0===e||e<2||e>256)&&(e=10),(void 0===o||o<1)&&(o=10);for(var r,n,g,b,image=new h(t),c=image.getImageData().data,l=image.getPixelCount(),f=[],i=0;i<l;i+=o)n=c[(r=4*i)+0],g=c[r+1],b=c[r+2],c[r+3]>=125&&(n>250&&g>250&&b>250||f.push([n,g,b]));var v=m.quantize(f,e),d=v?v.palette():null;return image.removeCanvas(),d},f.prototype.getColorFromUrl=function(t,e,o){var r=document.createElement("img"),n=this;r.addEventListener("load",function(){var c=n.getPalette(r,5,o)[0];e(c,t)}),r.src=t},f.prototype.getImageData=function(t,e){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var o=new Array(i),i=0;i<t.length;i++)o[i]=String.fromCharCode(t[i]);var data=o.join(""),r=window.btoa(data);e("data:image/png;base64,"+r)}},o.send()},f.prototype.getColorAsync=function(t,e,o){var r=this;this.getImageData(t,function(t){var n=document.createElement("img");n.addEventListener("load",function(){var t=r.getPalette(n,5,o)[0];e(t,this)}),n.src=t})},!v)var v={map:function(t,e){var o={};return e?t.map(function(t,i){return o.index=i,e.call(o,t)}):t.slice()},naturalOrder:function(a,b){return a<b?-1:a>b?1:0},sum:function(t,e){var o={};return t.reduce(e?function(p,t,i){return o.index=i,p+e.call(o,t)}:function(p,t){return p+t},0)},max:function(t,e){return Math.max.apply(null,e?v.map(t,e):t)}};var d,m=function(){var t=5,e=8-t,o=1e3,r=.75;function n(e,g,b){return(e<<2*t)+(g<<t)+b}function c(t){var e=[],o=!1;function r(){e.sort(t),o=!0}return{push:function(t){e.push(t),o=!1},peek:function(t){return o||r(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return o||r(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return o||r(),e}}}function l(t,e,o,r,n,c,l){this.r1=t,this.r2=e,this.g1=o,this.g2=r,this.b1=n,this.b2=c,this.histo=l}function h(){this.vboxes=new c(function(a,b){return v.naturalOrder(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())})}function f(t,e){if(e.count()){var o=e.r2-e.r1+1,r=e.g2-e.g1+1,c=e.b2-e.b1+1,l=v.max([o,r,c]);if(1==e.count())return[e.copy()];var i,h,f,d,m=0,x=[],w=[];if(l==o)for(i=e.r1;i<=e.r2;i++){for(d=0,h=e.g1;h<=e.g2;h++)for(f=e.b1;f<=e.b2;f++)d+=t[n(i,h,f)]||0;m+=d,x[i]=m}else if(l==r)for(i=e.g1;i<=e.g2;i++){for(d=0,h=e.r1;h<=e.r2;h++)for(f=e.b1;f<=e.b2;f++)d+=t[n(h,i,f)]||0;m+=d,x[i]=m}else for(i=e.b1;i<=e.b2;i++){for(d=0,h=e.r1;h<=e.r2;h++)for(f=e.g1;f<=e.g2;f++)d+=t[n(h,f,i)]||0;m+=d,x[i]=m}return x.forEach(function(t,i){w[i]=m-t}),C(l==o?"r":l==r?"g":"b")}function C(t){var o,r,n,c,l,h=t+"1",f=t+"2",v=0;for(i=e[h];i<=e[f];i++)if(x[i]>m/2){for(n=e.copy(),c=e.copy(),l=(o=i-e[h])<=(r=e[f]-i)?Math.min(e[f]-1,~~(i+r/2)):Math.max(e[h],~~(i-1-o/2));!x[l];)l++;for(v=w[l];!v&&x[l-1];)v=w[--l];return n[f]=l,c[h]=n[f]+1,[n,c]}}}return l.prototype={volume:function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var e=this.histo;if(!this._count_set||t){var i,o,r,c=0;for(i=this.r1;i<=this.r2;i++)for(o=this.g1;o<=this.g2;o++)for(r=this.b1;r<=this.b2;r++)c+=e[n(i,o,r)]||0;this._count=c,this._count_set=!0}return this._count},copy:function(){return new l(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(e){var o=this.histo;if(!this._avg||e){var r,i,c,l,h=0,f=1<<8-t,v=0,d=0,m=0;for(i=this.r1;i<=this.r2;i++)for(c=this.g1;c<=this.g2;c++)for(l=this.b1;l<=this.b2;l++)h+=r=o[n(i,c,l)]||0,v+=r*(i+.5)*f,d+=r*(c+.5)*f,m+=r*(l+.5)*f;this._avg=h?[~~(v/h),~~(d/h),~~(m/h)]:[~~(f*(this.r1+this.r2+1)/2),~~(f*(this.g1+this.g2+1)/2),~~(f*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(t){var o=t[0]>>e,r=t[1]>>e,n=t[2]>>e;return o>=this.r1&&o<=this.r2&&r>=this.g1&&r<=this.g2&&n>=this.b1&&n<=this.b2}},h.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map(function(t){return t.color})},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,i=0;i<e.size();i++)if(e.peek(i).vbox.contains(t))return e.peek(i).color;return this.nearest(t)},nearest:function(t){for(var e,o,r,n=this.vboxes,i=0;i<n.size();i++)((o=Math.sqrt(Math.pow(t[0]-n.peek(i).color[0],2)+Math.pow(t[1]-n.peek(i).color[1],2)+Math.pow(t[2]-n.peek(i).color[2],2)))<e||void 0===e)&&(e=o,r=n.peek(i).color);return r},forcebw:function(){var t=this.vboxes;t.sort(function(a,b){return v.naturalOrder(v.sum(a.color),v.sum(b.color))});var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var o=t.length-1,r=t[o].color;r[0]>251&&r[1]>251&&r[2]>251&&(t[o].color=[255,255,255])}},{quantize:function(d,m){if(!d.length||m<2||m>256)return!1;var x=function(o){var r,c,l,h,f=new Array(1<<3*t);return o.forEach(function(t){c=t[0]>>e,l=t[1]>>e,h=t[2]>>e,r=n(c,l,h),f[r]=(f[r]||0)+1}),f}(d);x.forEach(function(){});var w=function(t,o){var r,n,c,h=1e6,f=0,v=1e6,d=0,m=1e6,x=0;return t.forEach(function(t){r=t[0]>>e,n=t[1]>>e,c=t[2]>>e,r<h?h=r:r>f&&(f=r),n<v?v=n:n>d&&(d=n),c<m?m=c:c>x&&(x=c)}),new l(h,f,v,d,m,x,o)}(d,x),C=new c(function(a,b){return v.naturalOrder(a.count(),b.count())});function y(t,e){for(var r,n=1,c=0;c<o;)if((r=t.pop()).count()){var l=f(x,r),h=l[0],v=l[1];if(!h)return;if(t.push(h),v&&(t.push(v),n++),n>=e)return;if(c++>o)return}else t.push(r),c++}C.push(w),y(C,r*m);for(var _=new c(function(a,b){return v.naturalOrder(a.count()*a.volume(),b.count()*b.volume())});C.size();)_.push(C.pop());y(_,m-_.size());for(var k=new h;_.size();)k.push(_.pop());return k}}}(),x=f;o(252);d=o(253);var w={name:"Color",head:function(){return this.$store.state.currentTool.head},components:{"slider-picker":n.Slider,VueSlider:d},data:function(){return{colorVal:"",n:null,file:null,colors:"#00ADB5",alpha:1,preview:"",results:"",imgColor:{color:"",palette:""},requestIn:!1,colorthief:new x}},computed:{handleColor:function(){var t=l()(this.colors),e={hsl:t.toHsl(),hex:t.toHexString().toUpperCase(),hex8:t.toHex8String().toUpperCase(),rgba:t.toRgb(),hsv:t.toHsv()};return{"RGB(A)":t.toString("rgb").toUpperCase(),HEX6:t.toHexString().toUpperCase(),HEX8:t.toHex8String().toUpperCase(),HSL:t.toString("hsl").toUpperCase(),HSLA:"hsla(".concat(e.hsl.h.toFixed(0),",").concat((100*e.hsl.s).toFixed(0),"%,").concat((100*e.hsl.l).toFixed(0),"%,").concat(e.hsl.a.toFixed(0),")").toUpperCase(),HSV:t.toString("hsv").toUpperCase(),HSVA:"hsv(".concat(e.hsv.h.toFixed(0),",").concat((100*e.hsv.s).toFixed(0),"%,").concat((100*e.hsv.v).toFixed(0),"%,").concat(e.hsv.a.toFixed(0),")").toUpperCase()}}},watch:{colors:function(t){var e=l()(t);this.alpha=e.getAlpha()}},methods:{updateAlpha:function(){var t=l()(this.colors);t.setAlpha(this.alpha),this.colors=t.toHex8String()},updateColor:function(t){var e=l()(t.hex);e.setAlpha(this.alpha),this.colors=e.toHex8String()},handleChange:function(t){var e=this;if(this.requestIn)return!1;var o=t.target.files;if(!o.length)return!1;var n=o[0];this.requestIn=!0;var c=new FileReader;c.readAsDataURL(n),c.addEventListener("load",Object(r.a)(regeneratorRuntime.mark(function t(){var img;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.preview=c.result,(img=new Image).onload=function(){var t=e.colorthief.getPalette(img).map(function(t){return l()("rgb(".concat(t.toString(),")")).toHexString()}),o=l()("rgb(".concat(e.colorthief.getColor(img).toString(),")")).toHexString();e.imgColor.palette=t,e.imgColor.color=o,e.colors=o,e.requestIn=!1},img.src=e.preview;case 4:case"end":return t.stop()}},t)})),!1)},handleColorVal:function(t){var e=l()(t);e.isValid()&&(this.colors=e.toHex8String())}}},C=(o(594),o(1)),component=Object(C.a)(w,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"color"},[o("nya-container",{attrs:{title:"颜色转换"}},[o("nya-input",{attrs:{label:"输入颜色代码",placeholder:"#ffffff",autocomplete:"off",autofocus:""},on:{input:t.handleColorVal},model:{value:t.colorVal,callback:function(e){t.colorVal=e},expression:"colorVal"}}),t._v(" "),o("no-ssr",[o("slider-picker",{attrs:{value:t.colors},on:{input:t.updateColor}})],1),t._v(" "),o("no-ssr",[o("vue-slider",{attrs:{interval:.1,lazy:"",min:0,max:1},on:{change:t.updateAlpha},model:{value:t.alpha,callback:function(e){t.alpha=e},expression:"alpha"}})],1),t._v(" "),o("nya-input",{attrs:{type:"file",accept:"image/*",label:"请选择要提取主色的图片",placeholder:"点击这里上传文件"},on:{change:t.handleChange},model:{value:t.n,callback:function(e){t.n=e},expression:"n"}}),t._v(" "),t.preview?o("div",{staticClass:"preview"},[o("div",{staticClass:"nya-subtitle"},[t._v("\n                预览\n            ")]),t._v(" "),o("img",{attrs:{src:t.preview,alt:"preview"}})]):t._e(),t._v(" "),t.preview?o("div",{staticClass:"img-colors"},[o("div",{staticClass:"img-color"},[o("div",{staticClass:"nya-subtitle"},[t._v("\n                    主色\n                ")]),t._v(" "),o("div",{style:{"background-color":t.imgColor.color}},[t._v("\n                    "+t._s(t.imgColor.color)+"\n                ")])]),t._v(" "),o("div",{staticClass:"img-palette"},[o("div",{staticClass:"nya-subtitle"},[t._v("\n                    调色盘\n                ")]),t._v(" "),o("ul",t._l(t.imgColor.palette,function(e,r){return o("li",{key:r,style:{"background-color":e}},[t._v("\n                        "+t._s(e)+"\n                    ")])}),0)])]):t._e()],1),t._v(" "),t.colors?o("nya-container",{attrs:{title:"结果"}},[o("div",{staticClass:"text",style:{color:t.colors}},[t._v("\n            文字效果\n        ")]),t._v(" "),t._l(t.handleColor,function(e,r){return o("p",{key:r},[o("b",[t._v(t._s(r)+"：")]),o("span",[t._v(t._s(e))])])})],2):t._e()],1)},[],!1,null,null,null);e.default=component.exports}}]);